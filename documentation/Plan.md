# План автоматизации тестирования покупки тура "Марракэш"

## *1. Перечень автоматизируемых сценариев:*

### Возможность покупки тура _двумя_ способами:
1. Оплата по дебетовой карте
2. Оплата через кредит по данным карты

### Карты, представленные для тестирования (файл data.json):
- 4444 4444 4444 4441, status APPROVED
- 4444 4444 4444 4442, status DECLINED

### *Позитивные сценарии:*
 **1.** Оплата по дебетовой карте со статусом APPROVED:
   
#### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить"
3. Ввести в поле "Номер карты" - 4444 4444 4444 4441
4. Ввести в поле "Месяц" - любое число от 01 до 12
5. Ввести в поле "Год" - последние две цифры года (например: 22)
6. Ввести в поле "Владелец" - валидное имя (например: Alexander)
7. Ввести в поле "CVC/CVV" - 3-х значный номер (например: 123)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: появилось всплывающее окно "Операция одобрена Банком", в БД в payment_entity появилась запись со статусом APPROVED

 **2.** Оплата по дебетовой карте со статусом DECLINED:

#### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить"
3. Ввести в поле "Номер карты" - 4444 4444 4444 4442
4. Ввести в поле "Месяц" - любое число от 01 до 12
5. Ввести в поле "Год" - последние две цифры года (например: 22)
6. Ввести в поле "Владелец" - валидное имя (например: Daria)
7. Ввести в поле "CVC/CVV" - 3-х значный номер (например: 123)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: появилось всплывающее окно "Ошибка! Банк отказал в проведении операции", в БД в payment_entity появилась запись со статусом DECLINED

**3.** Оплата через кредит по данным карты со статусом APPROVED:

#### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить в кредит"
3. Ввести в поле "Номер карты" - 4444 4444 4444 4441
4. Ввести в поле "Месяц" - любое число от 01 до 12
5. Ввести в поле "Год" - последние две цифры года (например: 22)
6. Ввести в поле "Владелец" - валидное имя (например: Vladimir)
7. Ввести в поле "CVC/CVV" - 3-х значный номер (например: 123)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: появилось всплывающее окно "Операция одобрена Банком", в БД в credit_request_entity появилась запись со статусом APPROVED

**4.** Оплата через кредит по данным карты со статусом DECLINED:

#### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить в кредит"
3. Ввести в поле "Номер карты" - 4444 4444 4444 4442
4. Ввести в поле "Месяц" - любое число от 01 до 12
5. Ввести в поле "Год" - последние две цифры года (например: 22)
6. Ввести в поле "Владелец" - валидное имя (например: Anastasia)
7. Ввести в поле "CVC/CVV" - 3-х значный номер (например: 123)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: появилось всплывающее окно "Ошибка! Банк отказал в проведении операции", в БД в credit_request_entity появилась запись со статусом DECLINED

### *Негативные сценарии(Одинаково для покупки и покупки в кредит):*

#### Некорректные тестовые данные для негативных тестов:

1. **Все поля формы пустые**

1. **Поле "Номер карты":**
    * Поле пустое;
    * Длина значения менее 16 цифр;
    * Номера карты нет в БД банка.

1. **Поле "Месяц":**
    * Поле пустое;
    * Состоит из одной цифры;
    * Значение больше 12;
    * Значение равно 00.
    
1. **Поле "Год":**
    * Поле пустое;
    * Состоит из одной цифры;
    * Значение меньше текущего года (менее 20);
    * Значение на 5+ лет больше текущего года (более 25);
    * Значение равно 00.
    
1. **Поле "Владелец":**
    * Поле пустое;
    * Значение состоит из одного слова;
    * Поле содержит кириллицу;
    * Поле содержит цифры;
    * Поле содержит спецсимволы кроме допустимых (пробел, дефис).
    
1. **Поле "CVV":**
    * Поле пустое;
    * Состоит из одной цифры;
    * Состоит из двух цифр.



## *2. Перечень используемых инструментов с обоснованием выбора:*

- **IntelliJ IDEA 2021.1.3** - среда java-разработки с поддержкой всех последних технологий и фреймворков.
- **Java 11** язык для написания авто-тестов, имеет набор готового ПО для разработки и запуска приложений.
- **Gradle** используется для сборки проекта, для управления подключенными зависимостями и  для генерации отчётов о тестировании.
- **JUnit 5** для написания и запуска тестов. Не требует контроля пользователя во время исполнения тестов, может запускать одновременно несколько тестов, сообщает обо всех ошибках в ходе тестирования.
- **Docker** — это программное обеспечение, которое дает возможность на определенном участке памяти изолированно установить необходимую ОС (операционную систему), версию Java, настроить переменные окружения, установить различные зависимости и дать доступ только при определенных условиях (также это инструмент, позволяющий запускать мультиконтейнерные приложения, чтобы не устанавливать на компьютер необходимые для работы приложения Node.js и СУБД).
- **Selenide**, чтобы протестировать GUI. Помогает делать стабильные тесты, решая почти все проблемы с таймаутами, автоматически управляет браузером и делает скриншоты если тест упал.
- **Lombok** позволяет оптимизировать код авто-тестов, добавляет в Java новые «ключевые слова» и превращает аннотации в Java-код, уменьшая усилия на разработку и обеспечивая некоторую дополнительную функциональность.
- **Faker** для генерации тестовых данных. Эту библиотеку можно использовать для создания широкого спектра реально выглядящих данных от адресов до телефонных номеров.
- **Rest Assured** - java-библиотека для тестирования REST API, позволяет автоматизировать тестирование get и post запросов.
- **Allure** - фреймворк для создания отчетов о тестировании, для наглядного отображения прохождения тестов и ошибок.
- **Git и GitHub** для хранения кода. Git достаточно прост и удобен для управления исходным кодом, очень распространенная система контроля версий, поэтому достаточно хорошо взаимодействует с различными ОС. GitHub специализированный веб-сервис с удобным интерфейсом, интегрирован с Git.

## *3. Перечень и описание возможных рисков при автоматизации:*

- Проблемы с составлением селекторов элементов из-за отсутствия уникальных идентификаторов
- Возможна смена кода страницы либо css-селекторов.
- Нет реальной документации к сервису

## *4. Интервальная оценка с учётом рисков (в часах):*

### Необходимое время на тестирование веб-сервера составляет 48 час, с учетом рисков - 60 часов:

- подготовка окружения, инфраструктуры, развертывание БД - 10 часов
- написание авто-тестов, тестирование - 30 часов
- формирование и анализ отчетов - 8 часов

## *5. План сдачи работ:*

- Планирование автоматизации тестирования: 06.06.2022
- Автоматизация: 11.06.2022
- Подготовка отчётных документов по итогам автоматизации: 16.06.2022
